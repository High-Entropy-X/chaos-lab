<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chaos Lab</title>
  <link rel="stylesheet" href="css/global.css">
  <link rel="stylesheet" href="css/homepage.css">
</head>
<body data-theme="light">
  <!-- HEADER SECTION -->
  <header class="header">
    <div class="header-content">
      <div class="header-title">
        <h1>Welcome to Chaos Lab</h1>
      </div>
      <!-- Theme toggle styled as a switch -->
      <label class="theme-toggle" id="theme-toggle">
        <input type="checkbox">
        <span class="slider"></span>
      </label>
    </div>
  </header>
  
  <!-- FLASH GAMES HORIZONTAL STRIP -->
  <section class="flash-games-section">
    <h2>Play Flash Games</h2>
    <div class="flash-games-container">
      <div class="flash-games-strip">
        <a href="flash-games/game1.html" class="flash-game-card">
          <img src="assets/fg_icons/game1.png" alt="Game 1 Icon" onerror="this.onerror=null;this.src='assets/fg_icons/def.png';">
          <span>Game 1</span>
        </a>
        <a href="flash-games/game2.html" class="flash-game-card">
          <img src="assets/fg_icons/game2.png" alt="Game 2 Icon" onerror="this.onerror=null;this.src='assets/fg_icons/def.png';">
          <span>Game 2</span>
        </a>
        <a href="flash-games/game3.html" class="flash-game-card">
          <img src="assets/fg_icons/game3.png" alt="Game 3 Icon" onerror="this.onerror=null;this.src='assets/fg_icons/def.png';">
          <span>Game 3</span>
        </a>
        <a href="flash-games/game4.html" class="flash-game-card">
          <img src="assets/fg_icons/game4.png" alt="Game 4 Icon" onerror="this.onerror=null;this.src='assets/fg_icons/def.png';">
          <span>Game 4</span>
        </a>
        <a href="flash-games/game5.html" class="flash-game-card">
          <img src="assets/fg_icons/game5.png" alt="Game 5 Icon" onerror="this.onerror=null;this.src='assets/fg_icons/def.png';">
          <span>Game 5</span>
        </a>
        <a href="flash-games/game6.html" class="flash-game-card">
          <img src="assets/fg_icons/game6.png" alt="Game 6 Icon" onerror="this.onerror=null;this.src='assets/fg_icons/def.png';">
          <span>Game 6</span>
        </a>
        <a href="flash-games/game7.html" class="flash-game-card">
          <img src="assets/fg_icons/game7.png" alt="Game 7 Icon" onerror="this.onerror=null;this.src='assets/fg_icons/def.png';">
          <span>Game 7</span>
        </a>
        <a href="flash-games/game8.html" class="flash-game-card">
          <img src="assets/fg_icons/game8.png" alt="Game 8 Icon" onerror="this.onerror=null;this.src='assets/fg_icons/def.png';">
          <span>Game 8</span>
        </a>
        <a href="flash-games/game9.html" class="flash-game-card">
          <img src="assets/fg_icons/game9.png" alt="Game 9 Icon" onerror="this.onerror=null;this.src='assets/fg_icons/def.png';">
          <span>Game 9</span>
        </a>
        <a href="flash-games/game10.html" class="flash-game-card">
          <img src="assets/fg_icons/game10.png" alt="Game 10 Icon" onerror="this.onerror=null;this.src='assets/fg_icons/def.png';">
          <span>Game 10</span>
        </a>
      </div>
    </div>
    <div class="see-more-container">
      <a href="flash-games/index.html" class="btn-see-more">See More Games</a>
    </div>
  </section>

  <!-- On This Day in History Widget -->
  <aside class="today-history-widget">
    <h3>On This Day in History</h3>
    <div id="historyEvent">Loading...</div>
    <button id="reloadHistory" class="btn-reload">Reload</button>
  </aside>
  
  <!-- CONFESSION SHOWCASE SECTION -->
  <section class="confession-showcase">
    <h2>ðŸ’¬ Confessions</h2>
    <p>This page is for your confessions â€“ we read your pain and achievements, and your words stay private with us. Share what you want and let the world see it (keep it private, not secret).</p>
    <a href="pages/confession.html" class="btn-confess">Confess Now</a>
  </section>

  <!-- Guess the Future Section -->
  <section class="extra-section">
    <h2>Want to know what the future holds?</h2>
    <a href="pages/quiz.html" class="btn-quiz">Guess Your Future</a>
  </section>
  
  <!-- Quiz Preview Section -->
  <section class="quiz-preview-section">
    <h2>Preview: Guess Your Future</h2>
    <div class="iframe-container">
      <iframe src="pages/quiz.html" title="Quiz Preview"></iframe>
    </div>
    <a href="pages/quiz.html" class="btn-quiz">Take the Full Quiz</a>
  </section>

  <!-- SCRIPTS -->
  <script>
    // Theme toggle functionality using the switch style
    const themeToggleInput = document.querySelector("#theme-toggle input");
    themeToggleInput.addEventListener("change", function() {
      document.body.setAttribute("data-theme", this.checked ? "dark" : "light");
    });

    // Fetch "On This Day in History" data and update widget
    async function fetchTodayInHistory() {
      try {
        const response = await fetch("https://history.muffinlabs.com/date");
        const data = await response.json();
        const events = data.data.Events;
        if (events && events.length > 0) {
          const randomEvent = events[Math.floor(Math.random() * events.length)];
          document.getElementById("historyEvent").innerHTML =
            `<strong>${randomEvent.year}</strong>: ${randomEvent.text}`;
        } else {
          document.getElementById("historyEvent").textContent = "No events found for today.";
        }
      } catch (error) {
        document.getElementById("historyEvent").textContent = "Failed to fetch events.";
        console.error("Error fetching today in history:", error);
      }
    }
    fetchTodayInHistory();

    // Reload button for history widget
    document.getElementById("reloadHistory").addEventListener("click", fetchTodayInHistory);
  </script>
</body>
</html>
